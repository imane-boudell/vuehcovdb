{"remainingRequest":"/root/vuehcovdb/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/vuehcovdb/src/views/Search.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/root/vuehcovdb/src/views/Search.vue","mtime":1631215831630},{"path":"/root/vuehcovdb/node_modules/css-loader/dist/cjs.js","mtime":1631213235664},{"path":"/root/vuehcovdb/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1631213236960},{"path":"/root/vuehcovdb/node_modules/postcss-loader/src/index.js","mtime":1631213236264},{"path":"/root/vuehcovdb/node_modules/cache-loader/dist/cjs.js","mtime":1631213235484},{"path":"/root/vuehcovdb/node_modules/vue-loader/lib/index.js","mtime":1631213236960}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNhcGl0YWxpemUgewogIHRleHQtdHJhbnNmb3JtOmNhcGl0YWxpemU7Cn0KLyogCiogIFRoZSAubmF2aSBwcm9wZXJ0aWVzIGFyZSBmb3Igc3R5bGluZyBvbmx5CiogIFRoZXNlIHByb3BlcnRpZXMgY2FuIGJlIGNoYW5nZWQgb3IgcmVtb3ZlZAoqLwoubmF2aSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VhZWFlYTsKICBoZWlnaHQ6IDQwcHg7Cn0KCgovKgoqICBQb3NpdGlvbiB0aGUgI2luZm9pIGVsZW1lbnQgaW4gdGhlIHRvcC1yaWdodAoqICBvZiB0aGUgLndyYXBwZXIgZWxlbWVudAoqLwojaW5mb2kgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IGNhbGMoNTAlIC0gMzVweCk7CiAgcmlnaHQ6IGNhbGMoNTAlIC0gMzVweCk7CiAgCiAgLyoKICAqICBTdHlsaW5nIG9ubHksIHRoZSBiZWxvdyBjYW4gYmUgY2hhbmdlZCBvciByZW1vdmVkCiAgKiAgZGVwZW5kaW5nIG9uIHlvdXIgdXNlIGNhc2UKICAqLwogIGhlaWdodDogMTAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgcGFkZGluZzogMTBweCAxMHB4Owp9Cgoucm93IHsKICBwYWRkaW5nLWJvdHRvbTogNXB4Owp9Cgo="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<section class=\"jumbotron vertical-center main\">\n<div class=\"container\">\n    <h6 class=\"jumbotron-heading tl-blue\"><a href=\"/\">Home</a>&nbsp;<i class=\"fas fa-chevron-right\"></i>&nbsp; hCoronaviruses DB</h6>\n    <div class=\"accordion\" id=\"accordionExample\">\n        <div class=\"card-blue\">\n            <div class=\"\" id=\"headingTwo\">\n              <div class=\"collapsed\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\" >\n              <h1 class=\"tl-green card-title\">hCoronaviruses DB</h1>\n              <p class=\"card-text\">Comprehensibe, up-to-date, genetic and proteomic database for the SARS-CoV, MERS-CoV-2, and SARS-COV-2. User-friendly interface.</p>\n              <p class=\"card-text\">Computational tools for the customized search analysis.</p>\n              </div>\n            </div>\n            <div id=\"collapseTwo\" class=\"collapse show\" aria-labelledby=\"headingTwo\" data-parent=\"#accordionExample\">\n            <div class=\"card-body\">\n                <form> \n                <div class=\"form-group row\">\n                    <label for=\"exampleFormControlSelect1\" class=\"col-sm-2 col-form-label\" style=\"text-align:left;\">Virus Name</label>\n                    <div class=\"col-sm-10\">\n                        <div id=\"virusSelector\" class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\n                            <label @click=\"setSpecimen('sarscov2_virus')\" class=\"btn btn-primary active bg-white\">\n                                <input type=\"radio\" name=\"options\" id=\"opt-sarscov2\" autocomplete=\"off\" checked> SARS-COV-2\n                            </label>\n                            <label @click=\"setSpecimen('sars_virus')\" class=\"btn btn-primary bg-white\">\n                                <input type=\"radio\" name=\"options\" id=\"opt-sars\" autocomplete=\"off\"> SARS-COV\n                            </label>\n                            <label @click=\"setSpecimen('mers_virus')\" class=\"btn btn-primary bg-white\">\n                                <input type=\"radio\" name=\"options\" id=\"opt-mers\" autocomplete=\"off\"> MERS-COV\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group row\">\n                    <label for=\"exampleFormControlSelect1\" class=\"col-sm-2 col-form-label\" style=\"text-align:left;\">Sequence Type</label>\n                    <div class=\"col-sm-10\">\n                        <div id=\"virusSelector\" class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\n                            <label @click=\"setSequenceType('nucl')\" class=\"btn btn-secondary active bg-white\">\n                                <input type=\"radio\" name=\"options\" id=\"opt-sars\" autocomplete=\"off\" checked> Genes\n                            </label>\n                            <label @click=\"setSequenceType('prot')\" class=\"btn btn-secondary bg-white\">\n                                <input type=\"radio\" name=\"options\" id=\"opt-sarscov2\" autocomplete=\"off\"> Proteins\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div id=\"containi\">\n                    <div class=\"row\">\n                    <div class=\"col-xs-12 col-sm-8 col-lg-4\">\n                        <label for=\"xyzw1\" class=\"col-form-label tl-blue\">Gene Product Name (Gene Symbol) <div v-if=\"isLodaingCriteria\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                        </div></label>\n                        <select :disabled=\"isLodaingCriteria\" class=\"select2Crit form-control\" multiple id=\"selGeneSymbol\" size=\"10\">\n                            <option>(Any)</option>\n                            <option style=\"text-transform: capitalize;\"  v-for=\"g in criteria.genes\" :value=\"g[0]\">{{g[1]}} ({{g[0]}})</option>\n                        </select>\n                    </div>\n                    <div class=\"col-xs-12 col-sm-4 col-lg-3\">\n                        <label for=\"xyzw1\" class=\"col-form-label tl-blue\">Host <div v-if=\"isLodaingCriteria\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                        </div></label>\n                        <select :disabled=\"isLodaingCriteria\" class=\"select2Crit form-control\" multiple id=\"selHost\" size=\"10\">\n                            <option>(Any)</option>\n                            <option v-for=\"host in criteria.host\" v-bind:key=\"host\">{{host}}</option>\n                        </select>\n                    </div>\n                    <div class=\"col-xs-12 col-sm-6 col-lg-3\">\n                        <label for=\"xyzw1\" class=\"col-form-label tl-blue\">Country <div v-if=\"isLodaingCriteria\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                        </div></label>\n                        <select :disabled=\"isLodaingCriteria\" class=\"select2Crit form-control\" multiple id=\"selCountry\"  size=\"10\">\n                            <option>(Any)</option>\n                            <option v-for=\"country in criteria.country\" v-if=\"country != null\" v-bind:key=\"country\">{{country}}</option>\n                        </select>\n                    </div>\n                    <div class=\"col-xs-12 col-sm-6 col-lg-2\">\n                        <label for=\"xyzw1\" class=\"col-form-label tl-blue\">Collection Date <div v-if=\"isLodaingCriteria\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n                        </div></label>\n                        <select :disabled=\"isLodaingCriteria\" class=\"select2Crit form-control\" multiple id=\"selYear\" size=\"10\">\n                            <option>(Any)</option>\n                            <option v-for=\"year in criteria.collection_date\" v-if=\"year != null\" v-bind:key=\"year\">{{year}}</option>\n                        </select>\n                    </div>\n                    </div>\n                </div>\n                <br>\n                <div class=\"row\">\n                    <div class=\"col-sm-12\">\n                    <router-link :to=\"{ \n                      name: 'results', \n                      params: {\n                        specimen: specimen,\n                        sequence_type: sequence_type,\n                        search_type: 'custom', \n                        gene_symbols: criteria_selection.gene_symbols, \n                        hosts: criteria_selection.hosts, \n                        countries: criteria_selection.countries, \n                        years: criteria_selection.years, \n                        } \n                      }\" class=\"btn btn-primary bg-blue\">\n                      <span>\n                        <i class=\"fa fa-search\"></i>  Search for {{specimen.replace(\"_\", \" \") + \"es\"}} \n                        <span style=\"font-weight: bold\" v-if=\"!isLodaingResultsCount\">({{num_virus}} results)</span>\n                      <div v-if=\"isLodaingResultsCount\" class=\"spinner-border text-light spinner-border-sm\" role=\"status\"></div>\n                      </span>\n                    </router-link>\n                    </div>\n                </div>\n                </form>\n            </div>\n            </div>\n        </div>\n\n        <div class>\n            <div class=\"\" id=\"headingThree\">\n            <h5 class=\"mb-0\">\n                <button class=\"btn btn-link collapsed tl-blue\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseThree\" aria-expanded=\"false\" aria-controls=\"collapseThree\">\n                Search by Accession Number\n                </button>\n            </h5>\n            </div>\n            <div id=\"collapseThree\" class=\"collapse\" aria-labelledby=\"headingThree\" data-parent=\"#accordionExample\">\n            <div class=\"card-body\">\n                <form method=\"get\" action=\"/results\">\n                    <div class=\"form-group row\">\n                        <label for=\"inputPassword3\" class=\"col-sm-2 col-form-label\">Accession Number</label>\n                        <div class=\"col-sm-10\">\n                          <input type=\"text\" v-model=\"accession_num\" class=\"form-control\" id=\"exampleFormControlTextarea1\"  placeholder=\"Enter the accession number here\">\n                        </div>\n                    </div>\n                    <div class=\"form-group row\">\n                        <div class=\"col-sm-12\">\n                        <router-link :to=\"{ name: 'results', params: {search_type: 'accession', accession_num: accession_num } }\" class=\"btn btn-primary\"><i class=\"fa fa-search\"></i>  Search</router-link>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            </div>\n        </div>\n    </div>\n</div>\n</section>\n</template>\n\n<script>\nimport axios from 'axios'\nimport {LoopingRhombusesSpinner} from 'epic-spinners'\n\n// @ is an alias to /src\nexport default {\n  name: \"search\",\n  components: {\n    LoopingRhombusesSpinner\n  },\n  data () {\n    return {\n      isLodaingCriteria: true,\n      isLodaingResultsCount: true,\n      accession_num: \"\",\n      specimen: \"sarscov2_virus\",\n      sequence_type: \"nucl\",\n      num_virus: 0,\n      criteria: {\n        gene_symbols: null,\n        hosts: null,\n        countries: null,\n        years: null,\n      },\n      criteria_selection: {\n        gene_symbols: null,\n        hosts: null,\n        countries: null,\n        years: null,\n      },\n    }\n  },\n  created () {\n    this.fetchData()\n  },\n  updated () {\n   /* $('.select2Crit').select2({\n      \"placeholder\": \"(Any)\"\n    });*/\n\n    $('.select2Crit').on('change',e => {\n      this.setCriteria();\n    });\n  },\n  watch: {\n\n  },\n  computed: {\n    username () {\n      return \"\"\n    }\n  },\n  methods: {\n    sleep(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    },\n    loadCriteria (sequence_type, specimen) {\n      axios.post(\"/api/viruses/search_criteria/\" + sequence_type + \"/\" + specimen).then(response=>{\n        // Special handling for genes\n        for (var i = 0; i < response.data.genes.length; i++)\n        {\n          var g = response.data.genes[i];\n          if(g[0] == \"P90\") {\n            g[1] = \"RNA-Directed RNA Polymerase\";\n          } else {\n            g[1] = g[1].toLowerCase();\n          }\n        }\n\n        this.criteria = response.data;\n        \n         this.sleep(500).then( ()=>{\n        this.isLodaingCriteria = false;});\n      })\n    },\n    getCriteriaResultCount(gene_symbols = null, hosts = null, countries = null, years = null) {\n      this.isLodaingResultsCount = true;\n      axios.post(\"/api/viruses/search_criteria/result_count/\" + this.sequence_type + \"/\" + this.specimen, {\n        gene_symbol: gene_symbols,\n        host: hosts,\n        country: countries,\n        collection_date: years,\n      }).then(response=>{  \n        this.num_virus = response.data\n        this.sleep(500).then( ()=>{\n          this.isLodaingResultsCount = false;});\n      })\n    },\n    fetchData () {\n      this.loadCriteria(\"nucl\", \"sarscov2_virus\")\n      this.getCriteriaResultCount()\n      this.resetSelection()\n    },\n    setCriteria() {\n\n      // If any is selected, remove all other selections\n      var sym = this.getSelectedValue(\"#selGeneSymbol\");\n      var hos = this.getSelectedValue(\"#selHost\");\n      var con = this.getSelectedValue(\"#selCountry\");\n      var yea = this.getSelectedValue(\"#selYear\");\n\n      this.criteria_selection.gene_symbols = sym;\n      this.criteria_selection.hosts = hos;\n      this.criteria_selection.countries = con;\n      this.criteria_selection.years = yea;\n      \n      this.getCriteriaResultCount(sym, hos, con, yea);\n    },\n    getSelectedValue(selector) {\n      if($(selector).val().includes(\"(Any)\")|| $(selector).val().length == 0)\n      {\n        $(selector + \" option:selected\").prop(\"selected\", false);\n        $(selector).val(\"(Any)\");\n        return null;\n      }\n      return $(selector).val();\n    },\n    resetSelection() {\n      for(var selector of [\"#selGeneSymbol\", \"#selHost\", \"#selCountry\", \"#selYear\"])\n      {\n        $(selector + \" option:selected\").prop(\"selected\", false);\n        $(selector).val(\"(Any)\");\n      }\n    },\n    setSequenceType(sequence_type) {\n      this.isLodaingCriteria = true;\n      this.sequence_type = sequence_type;\n      this.loadCriteria(sequence_type, this.specimen)\n      this.getCriteriaResultCount()\n      this.resetSelection()\n      this.setCriteria()\n    },\n    setSpecimen(specimen) {\n      this.isLodaingCriteria = true;\n      this.specimen = specimen\n      this.loadCriteria(this.sequence_type, specimen)\n      this.getCriteriaResultCount()\n      this.resetSelection()\n      this.setCriteria()\n    }\n  }\n};\n</script>\n\n<style>\n.capitalize {\n  text-transform:capitalize;\n}\n/* \n*  The .navi properties are for styling only\n*  These properties can be changed or removed\n*/\n.navi {\n  background-color: #eaeaea;\n  height: 40px;\n}\n\n\n/*\n*  Position the #infoi element in the top-right\n*  of the .wrapper element\n*/\n#infoi {\n  position: absolute;\n  top: calc(50% - 35px);\n  right: calc(50% - 35px);\n  \n  /*\n  *  Styling only, the below can be changed or removed\n  *  depending on your use case\n  */\n  height: 100px;\n  width: 100%;\n  padding: 10px 10px;\n}\n\n.row {\n  padding-bottom: 5px;\n}\n\n</style>\n\n"]}]}