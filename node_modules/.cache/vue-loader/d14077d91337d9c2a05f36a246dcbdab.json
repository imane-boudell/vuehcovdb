{"remainingRequest":"/var/www/html/vue/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/vue/app/src/views/Results.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/vue/app/src/views/Results.vue","mtime":1604523727029},{"path":"/var/www/html/vue/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/vue/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgR0NoYXJ0IH0gZnJvbSAndnVlLWdvb2dsZS1jaGFydHMnCmltcG9ydCB7IEhvbGxvd0RvdHNTcGlubmVyIH0gZnJvbSAnZXBpYy1zcGlubmVycycKaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJlc3VsdHMiLAogIGNvbXBvbmVudHM6IHsKICAgIEdDaGFydCwKICAgIEhvbGxvd0RvdHNTcGlubmVyCiAgfSwKICBwcm9wczogWydzZWFyY2hfdHlwZScsICdzZXF1ZW5jZV90eXBlJywgJ2FjY2Vzc2lvbl9udW0nLCAnc3BlY2ltZW4nLCAnZ2VuZV9zeW1ib2xzJywgJ3Byb3RlaW5zJywgJ2hvc3RzJywgJ2NvdW50cmllcycsICd5ZWFycyddLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgICBtdmlld19jb25zZW5zdXM6IGZhbHNlLAogICAgICAgIG12aWV3X3JlZmVyZW5jZTogLTEsCiAgICAgICAgc2VsZWN0ZWRSb3dzOiBbXSwKICAgICAgICB2aXJ1c2VzOiBudWxsLAogICAgICAgIGdlbmVzVGFibGU6IG51bGwsCiAgICAgICAgY2hhcnREYXRhOiBbWydDb3VudHJ5JywgJ1BvcHVsYXJpdHknXV0sCiAgICAgICAgY2hhcnRUYWJsZURhdGE6IGZhbHNlLAogICAgICAgIGNoYXJ0T3B0aW9uczogewogICAgICAgICAgaGVpZ2h0OiA2MDAsCiAgICAgICAgICBkYXRhbGVzc1JlZ2lvbkNvbG9yOiAiI2ZjZmNmYyIsCiAgICAgICAgICBjb2xvckF4aXM6IHtjb2xvcnM6IFsnbGlnaHRibHVlJywgJ2dyZWVuJ119CiAgICAgICAgfSwKICAgICAgICB5ZWFyRGF0YTogZmFsc2UsCiAgICAgICAgaXNMb2FkaW5nUmVzdWx0OiB0cnVlLAogICAgICAgIGNvdW50cnlfY29kZXM6IHtudWxsOiAnVW5rbm93bicsICdVbmtub3duJzogJ1Vua25vd24nLCAnQWZnaGFuaXN0YW4nOiAnQUYnLCAnQWxiYW5pYSc6ICdBTCcsICdBbGdlcmlhJzogJ0RaJywgJ0FuZ29sYSc6ICdBTycsICdBcmdlbnRpbmEnOiAnQVInLCAnQXVzdHJhbGlhJzogJ0FVJywgCiAgICAgICAgICAnQXVzdHJpYSc6ICdBVCcsICdBemVyYmFpamFuJzogJ0FaJywgJ0JhaHJhaW4nOiAnQkgnLCAnQmFuZ2xhZGVzaCc6ICdCRCcsICdCZWxhcnVzJzogJ0JZJywgJ0JlbGdpdW0nOiAnQkUnLCAnQmVsaXplJzogJ0JaJywgCiAgICAgICAgICAnQmVuaW4nOiAnQkonLCAnQm9saXZpYSc6ICdCTycsICdCb3NuaWFfYW5kX0hlcnplZ292aW5hJzogJ0JBJywgJ0JvdHN3YW5hJzogJ0JXJywgJ0JyYXppbCc6ICdCUicsICdCcnVuZWknOiAnQk4nLCAnQnVsZ2FyaWEnOiAnQkcnLAogICAgICAgICAgJ0J1cmtpbmFfRmFzbyc6ICdCRicsICdDYW1ib2RpYSc6ICdDTycsICdDYW1lcm9vbic6ICdDTScsICdDYW5hZGEnOiAnQ0EnLCAnQ2VudHJhbF9BZnJpY2FuX1JlcHVibGljJzogJ0NGJywgJ0NoaWxlJzogJ0NMJywKICAgICAgICAgICdDaGluYSc6ICdDTicsICdDb2xvbWJpYSc6ICdDTycsICdDb3RlX2RJdm9pcmUnOiAnQ0knLCAnQ3JvYXRpYSc6ICdIUicsICdDeXBydXMnOiAnQ1knLCAnQ3plY2hfUmVwdWJsaWMnOiAnQ1onLAogICAgICAgICAgJ0RlbW9jcmF0aWNfUmVwdWJsaWNfb2ZfdGhlX0NvbmdvJzogJ0NEJywgJ0Rlbm1hcmsnOiAnREsnLCAnRG9taW5pY2FuX1JlcHVibGljJzogJ0RPJywgJ0VjdWFkb3InOiAnRUMnLCAnRWd5cHQnOiAnRUcnLCAnRXF1YXRvcmlhbF9HdWluZWEnOiAnR1EnLAogICAgICAgICAgJ0VzdG9uaWEnOiAnRUUnLCAnRXRoaW9waWEnOiAnRVQnLCAnRmlubGFuZCc6ICdGSScsICdGcmFuY2UnOiAnRlInLCAnR2Fib24nOiAnR0EnLCAnR2FtYmlhJzogJ0dNJywgJ0dlcm1hbnknOiAnREUnLCAnR2hhbmEnOiAnR0gnLAogICAgICAgICAgJ0dpYnJhbHRhcic6ICdHSScsICdHcmVlY2UnOiAnR1InLCAnR3VhbSc6ICdHVScsICdHdXlhbmEnOiAnR1knLCAnSG9uZHVyYXMnOiAnSE4nLCAnSG9uZ19Lb25nJzogJ0hLJywgJ0h1bmdhcnknOiAnSFUnLCAnSW5kaWEnOiAnSU4nLAogICAgICAgICAgJ0luZG9uZXNpYSc6ICdJRCcsICdJcmFuJzogJ0lSJywgJ0lyYXEnOiAnSVEnLCAnSXJlbGFuZCc6ICdJRScsICdJc3JhZWwnOiAnSUwnLCAnSXRhbHknOiAnSVQnLCAnSmFwYW4nOiAnSlAnLCAnS2F6YWtoc3Rhbic6ICdLWicsICdLZW55YSc6ICdLRScsCiAgICAgICAgICAnS29yZWEnOiAnS1AnLCAnS3lyZ3l6c3Rhbic6ICdLWicsICdMYW9zJzogJ0xBJywgJ0xhdHZpYSc6ICdMVicsICdMZWJhbm9uJzogJ0xCJywgJ0xlc290aG8nOiAnTFMnLCAnTGliZXJpYSc6ICdMUicsICdMaWJ5YSc6ICdMWScsICdMaXRodWFuaWEnOiAnTFQnLAogICAgICAgICAgJ0x1eGVtYm91cmcnOiAnTFUnLCAnTWFjZWRvbmlhJzogJ01LJywgJ01hbGF3aSc6ICdNVycsICdNYWxheXNpYSc6ICdNWScsICdNYWxpJzogJ01MJywgJ01hdXJpdGFuaWEnOiAnTVInLCAnTWF5b3R0ZSc6ICdZVCcsICdNZXhpY28nOiAnTVgnLAogICAgICAgICAgJ01vbGRvdmEnOiAnTUQnLCAnTW9uZ29saWEnOiAnTU4nLCAnTW9yb2Njbyc6ICdNQScsICdNb3phbWJpcXVlJzogJ01aJywgJ015YW5tYXInOiAnTU0nLCAnTmFtaWJpYSc6ICdOQScsICdOZXBhbCc6ICdOUCcsICdOZXRoZXJsYW5kcyc6ICdOTCcsCiAgICAgICAgICAnTmV3X1plYWxhbmQnOiAnTlonLCAnTmlnZXInOiAnTkUnLCAnTmlnZXJpYSc6ICdORycsICdOb3J3YXknOiAnTk8nLCAnT21hbic6ICdPTScsICdQYWtpc3Rhbic6ICdQSycsICdQYWxhdSc6ICdQVycsICdQYW5hbWEnOiAnUEEnLAogICAgICAgICAgJ1BhcHVhX05ld19HdWluZWEnOiAnUEcnLCAnUGVydSc6ICdQRScsICdQaGlsaXBwaW5lcyc6ICdQSCcsICdQb2xhbmQnOiAnUEwnLCAnUG9ydHVnYWwnOiAnUFQnLCAnUWF0YXInOiAnUUEnLCAnUmVwdWJsaWNfb2ZfdGhlX0NvbmdvJzogJ0NEJywKICAgICAgICAgICdSb21hbmlhJzogJ1JPJywgJ1J1c3NpYSc6ICdSVScsICdSd2FuZGEnOiAnUlcnLCAnU2VuZWdhbCc6ICdTTicsICdTZXJiaWEnOiAnUlMnLCAnU2VyYmlhX2FuZF9Nb250ZW5lZ3JvJzogJ01FJywgJ1NleWNoZWxsZXMnOiAnU0MnLAogICAgICAgICAgJ1NpZXJyYV9MZW9uZSc6ICdTTCcsICdTaW5nYXBvcmUnOiAnU0cnLCAnU2xvdmVuaWEnOiAnU0knLCAnU29tYWxpYSc6ICdTTycsICdTb3V0aF9BZnJpY2EnOiAnWkEnLCAnU291dGhfS29yZWEnOiAnS1InLCAnU3BhaW4nOiAnRVMnLAogICAgICAgICAgJ1NyaV9MYW5rYSc6ICdMSycsICdTdWRhbic6ICdTRCcsICdTd2F6aWxhbmQgKEVzd2F0YW5pKSc6ICdTWicsICdTd2VkZW4nOiAnU0UnLCAnU3dpdHplcmxhbmQnOiAnQ0gnLCAnU3lyaWEnOiAnU1knLCAnVGFpd2FuJzogJ1RXJywgJ1RoYWlsYW5kJzogJ1RIJywKICAgICAgICAgICdUb2dvJzogJ1RHJywgJ1R1bmlzaWEnOiAnVE4nLCAnVHVya2V5JzogJ1RSJywgJ1VnYW5kYSc6ICdVRycsICdVa3JhaW5lJzogJ1VBJywgJ1VuaXRlZF9BcmFiX0VtaXJhdGVzJzogJ0FFJywgJ1VuaXRlZF9LaW5nZG9tJzogJ0dCJywgJ1VydWd1YXknOiAnVVknLAogICAgICAgICAgJ1VTQSc6ICdVUycsICdVemJla2lzdGFuJzogJ1VaJywgJ1ZpZXRfTmFtJzogJ1ZOJywgJ1dlc3RfQmFuayc6ICdQUycsICdaYW1iaWEnOiAnWk0nLCAnWmltYmFid2UnOiAnWlcnfSwKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIHVwZGF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICQuZm4uZGF0YVRhYmxlLmV4dC5lcnJNb2RlID0gJ25vbmUnOwoKICAgIHZhciBnZW5lc1RhYmxlID0gJCgnI215VGFibGUnKS5EYXRhVGFibGUoewogICAgICBjb2x1bW5EZWZzOiBbIHsKICAgICAgICBvcmRlcmFibGU6IGZhbHNlLAogICAgICAgIGNsYXNzTmFtZTogJ3NlbGVjdC1jaGVja2JveCcsCiAgICAgICAgdGFyZ2V0czogMAogICAgICB9LAogICAgICB7CiAgICAgICAgdGFyZ2V0czogWyAxLCAxMCBdLAogICAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICAgIHNlYXJjaGFibGU6IGZhbHNlCiAgICAgIH0KICAgICAgXSwKICAgICAgc2VsZWN0OiB7CiAgICAgICAgICBzdHlsZTogICAgJ211bHRpJywKICAgICAgICAgIHNlbGVjdG9yOiAndGQ6Zmlyc3QtY2hpbGQnCiAgICAgIH0sCiAgICAgIG9yZGVyOiBbWyAyLCAiYXNjIiBdXSwKICAgICAgcmVzcG9uc2l2ZTogdHJ1ZQogICAgfSk7CgogICAgdGhpcy5nZW5lc1RhYmxlID0gZ2VuZXNUYWJsZTsKCiAgICAkKCcjc2VxVGFibGUnKS5EYXRhVGFibGUoewogICAgICBvcmRlcjogW1sgMSwgImRlc2MiIF1dLAogICAgICAiZG9tIjogJzwidG9vbGJhciI+JywKICAgICAgInBhZ2luZyI6IGZhbHNlLAogICAgfSk7CgogICAgJCgnI3llYXJUYWJsZScpLkRhdGFUYWJsZSh7CiAgICAgIG9yZGVyOiBbWyAxLCAiZGVzYyIgXV0sCiAgICAgICJkb20iOiAnPCJ0b29sYmFyIj4nLAogICAgICAicGFnaW5nIjogZmFsc2UsCiAgICB9KTsKCgogICAgJCgiI3NlbGVjdEFsbEdlbmVzIikuY2xpY2soIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoJCh0aGlzKS5pcyggIjpjaGVja2VkIiApKSB7CiAgICAgICAgICAgIGdlbmVzVGFibGUucm93cygpLnNlbGVjdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdlbmVzVGFibGUucm93cygpLmRlc2VsZWN0KCk7IAogICAgICAgIH0KICAgIH0pOwoKCiAgICAkKCcjaGlzdC10YWInKS5vbignY2xpY2snLCBlPT4gewogICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgdGhpcy4kcmVmcy5nY2hhcnRIaXN0LmRyYXdDaGFydCgpOwogICAgICB9LCA1MDApOwogICAgfSkKCiAgICAkKCcjbWFwLXRhYicpLm9uKCdjbGljaycsIGU9PiB7CiAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICB0aGlzLiRyZWZzLmdjaGFydE1hcC5kcmF3Q2hhcnQoKTsKICAgICAgfSwgNTAwKTsKICAgIH0pCiAgfSwKICB3YXRjaDogewoKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YSgpewogICAgICAgIHN3aXRjaCh0aGlzLnNlYXJjaF90eXBlKQogICAgICAgIHsKICAgICAgICBjYXNlICJhY2Nlc3Npb24iOgogICAgICAgICAgICB0aGlzLmdldFZpcnVzZXNCeUFjY2Vzc2lvbih0aGlzLmFjY2Vzc2lvbl9udW0pCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImN1c3RvbSI6CiAgICAgICAgICAgIHRoaXMuZ2V0VmlydXNlc0N1c3RvbSgpCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0sCiAgICBtc2FNdXNjbGVMaW5rKGFsZ28pIHsKICAgICAgdmFyIGlkcyA9IFtdOwogICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLmdlbmVzVGFibGUucm93cygnLnNlbGVjdGVkJykuZGF0YSgpOwoKICAgICAgaWYoc2VsZWN0ZWQubGVuZ3RoIDwgMikgewogICAgICAgIGFsZXJ0KCJQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IDIgc2VxdWVuY2UgZnJvbSB0aGUgdGFibGUuIikKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWQubGVuZ3RoID4gMTApIHsKICAgICAgICBhbGVydCgiWW91IGNhbiBzZWxlY3QgYSBtYXhpbXVtIG9mIDEwIHNlcXVlbmNlcyBmb3IgdGhlIGFsaWdubWVudC4iKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgIGlkcy5wdXNoKHBhcnNlSW50KHNlbGVjdGVkW2ldWzFdKSk7CiAgICAgIH0KCiAgICAgIGlmKGFsZ28gPT0gIm12aWV3IikgewogICAgICAgIHZhciByZWZpZCA9IHBhcnNlSW50KCQoImlucHV0OnJhZGlvW25hbWU9cmVmZXJlbmNlRm9yTXZpZXddOmNoZWNrZWQiKS52YWwoKSk7CiAgICAgICAgaWYocmVmaWQpIHsKICAgICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKHJlZmlkKTsKICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIGlkcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgaWRzLnVuc2hpZnQocmVmaWQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGxpbms7CiAgICAgIGlmKGFsZ28gPT0gIm12aWV3IiAmJiB0aGlzLm12aWV3X2NvbnNlbnN1cykgewogICAgICAgIGxpbmsgPSB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh7IHBhdGg6ICdtc2EnLCBxdWVyeToge2FsZ286IGFsZ28sIGlkczogaWRzLCBjb25zZW5zdXM6IHRoaXMubXZpZXdfY29uc2Vuc3VzIH0gfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGluayA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsgcGF0aDogJ21zYScsIHF1ZXJ5OiB7YWxnbzogYWxnbywgaWRzOiBpZHMgfSB9KTsKICAgICAgfQogICAgICB3aW5kb3cub3BlbihsaW5rLmhyZWYsICdfYmxhbmsnKTsKICAgIH0sCiAgICBjb25maWd1cmVNdmlldygpewogICAgICB2YXIgcm93cyA9IFtdOwogICAgICB2YXIgaWRzID0gW107CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuZ2VuZXNUYWJsZS5yb3dzKCcuc2VsZWN0ZWQnKS5kYXRhKCk7CgogICAgICBpZihzZWxlY3RlZC5sZW5ndGggPCAyKSB7CiAgICAgICAgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYXQgbGVhc3QgMiBzZXF1ZW5jZSBmcm9tIHRoZSB0YWJsZS4iKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZC5sZW5ndGggPiAxMCkgewogICAgICAgIGFsZXJ0KCJZb3UgY2FuIHNlbGVjdCBhIG1heGltdW0gb2YgMTAgc2VxdWVuY2VzIGZvciB0aGUgYWxpZ25tZW50LiIpCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcm93cy5wdXNoKHtpZDogcGFyc2VJbnQoc2VsZWN0ZWRbaV1bMV0pLCAKICAgICAgICAgIHRpdGxlOiBzZWxlY3RlZFtpXVs0XX0pOwogICAgICB9CgogICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHJvd3M7CgogICAgICAkKCcjbW9kYWxDb25maWcnKS5tb2RhbCgndG9nZ2xlJykKICAgIH0sCiAgICBkb3dubG9hZFNlbGVjdGVkKCkgewogICAgICB2YXIgZmFzdGEgPSBbXTsKICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5nZW5lc1RhYmxlLnJvd3MoJy5zZWxlY3RlZCcpLmRhdGEoKTsKCiAgICAgIGlmKHNlbGVjdGVkLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYXQgbGVhc3QgMSBzZXF1ZW5jZSBmcm9tIHRoZSB0YWJsZS4iKQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgIGZhc3RhLnB1c2goc2VsZWN0ZWRbaV1bMTBdLnJlcGxhY2UoIiZndDsiLCAiPiIpKTsKICAgICAgfQoKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZmFzdGEuam9pbigiXG4iKV0sIHt0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04In0pOwogICAgICBzYXZlQXMoYmxvYiwgImhDb3ZkYl9yZWNvcmRzLmZhc3RhIik7CiAgICB9LAogICAgZ2V0VmlydXNlc0J5QWNjZXNzaW9uKGFjY2Vzc2lvbk51bSkgewogICAgICAgIGF4aW9zLmdldCgiL2FwaS92aXJ1c2VzL3NlYXJjaC9ieV9hY2Nlc3Npb24vIiArIGFjY2Vzc2lvbk51bSkudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICB0aGlzLnZpcnVzZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ1Jlc3VsdCA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmJ1aWxkR2VvTWFwKCk7CiAgICAgICAgfSkKICAgIH0sCiAgICBnZXRWaXJ1c2VzQ3VzdG9tKCkgewogICAgICBheGlvcy5wb3N0KCIvYXBpL3ZpcnVzZXMvc2VhcmNoL2J5X2NyaXRlcmlhLyIgKyB0aGlzLnNlcXVlbmNlX3R5cGUgKyAiLyIgKyB0aGlzLnNwZWNpbWVuLCB7CiAgICAgICAgZ2VuZV9zeW1ib2w6IHRoaXMuZ2VuZV9zeW1ib2xzLAogICAgICAgIHByb3RlaW46IHRoaXMucHJvdGVpbnMsCiAgICAgICAgaG9zdDogdGhpcy5ob3N0cywKICAgICAgICBjb3VudHJ5OiB0aGlzLmNvdW50cmllcywKICAgICAgICBjb2xsZWN0aW9uX2RhdGU6IHRoaXMueWVhcnMsCiAgICAgIH0pLnRoZW4ocmVzcG9uc2U9PnsgIAogICAgICAgIHRoaXMudmlydXNlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5pc0xvYWRpbmdSZXN1bHQgPSBmYWxzZTsKICAgICAgICB0aGlzLmJ1aWxkR2VvTWFwKCk7CiAgICAgIH0pCiAgICB9LAogICAgYnVpbGRHZW9NYXAoKSB7CiAgICAgICAgdmFyIHJlc3VsdHMgPSBbWydDb3VudHJ5JywgJ1NlcXVlbmNlcyddXTsKICAgICAgICB2YXIgeWVhckhpc3QgPSBbWydDb2xsZWN0aW9uIERhdGUnLCAnU2VxdWVuY2VzJ11dOwogICAgICAgIHZhciBjb3VudHMgPSB7fTsKICAgICAgICB2YXIgeWVhckNvdW50cyA9IHt9OwogICAgICAgIHZhciB0YWJsZUNvdW50cyA9IHt9OwoKICAgICAgICBmb3IodmFyIHYgb2YgdGhpcy52aXJ1c2VzKSB7CiAgICAgICAgICB2YXIgY291bnRyeV9jb2RlID0gdGhpcy5jb3VudHJ5X2NvZGVzW3YuY291bnRyeV07CiAgICAgICAgICB2YXIgY291bnRyeV9uYW1lID0gdi5jb3VudHJ5ID09IG51bGwgPyAiVW5rbm93biIgOiB2LmNvdW50cnk7CiAgICAgICAgICB2YXIgeWVhciA9IHYuY29sbGVjdGlvbl9kYXRlOwogICAgICAgICAgeWVhciA9IHllYXIgPT0gbnVsbCA/ICJVbmtub3duIiA6IHllYXI7CgogICAgICAgICAgaWYoY291bnRyeV9jb2RlIGluIGNvdW50cykgewogICAgICAgICAgICBjb3VudHNbY291bnRyeV9jb2RlXSsrOwogICAgICAgICAgICB0YWJsZUNvdW50c1tjb3VudHJ5X25hbWVdKys7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvdW50c1tjb3VudHJ5X2NvZGVdID0gMTsKICAgICAgICAgICAgdGFibGVDb3VudHNbY291bnRyeV9uYW1lXSA9IDE7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gWWVhciBkYXRhCiAgICAgICAgICBpZih5ZWFyIGluIHllYXJDb3VudHMpIHsKICAgICAgICAgICAgeWVhckNvdW50c1t5ZWFyXSsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgeWVhckNvdW50c1t5ZWFyXSA9IDE7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IodmFyIGsgaW4gY291bnRzKSB7CiAgICAgICAgICByZXN1bHRzLnB1c2goW2ssIGNvdW50c1trXV0pCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZvcih2YXIgayBpbiB5ZWFyQ291bnRzKSB7CiAgICAgICAgICB5ZWFySGlzdC5wdXNoKFtrLCB5ZWFyQ291bnRzW2tdXSkKICAgICAgICB9CgogICAgICAgIHRoaXMuY2hhcnREYXRhID0gcmVzdWx0czsKICAgICAgICB0aGlzLmNoYXJ0VGFibGVEYXRhID0gdGFibGVDb3VudHM7CiAgICAgICAgdGhpcy55ZWFyRGF0YSA9IHllYXJIaXN0OwogICAgfSwKICAgIGdldE1hcENvdW50cyhnZW5lX3N5bWJvbHMgPSBudWxsLCBwcm90ZWlucyA9IG51bGwsIGhvc3RzID0gbnVsbCwgY291bnRyaWVzID0gbnVsbCwgeWVhcnMgPSBudWxsKSB7CiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvbWFwL2J5X2NyaXRlcmlhLyIgKyB0aGlzLnNwZWNpbWVuLCB7CiAgICAgICAgZ2VuZV9zeW1ib2w6IHRoaXMuZ2VuZV9zeW1ib2xzLAogICAgICAgIHByb3RlaW46IHRoaXMucHJvdGVpbnMsCiAgICAgICAgaG9zdDogdGhpcy5ob3N0cywKICAgICAgICBjb3VudHJ5OiB0aGlzLmNvdW50cmllcywKICAgICAgICBjb2xsZWN0aW9uX2RhdGU6IHRoaXMueWVhcnMsCiAgICAgIH0pLnRoZW4ocmVzcG9uc2U9PnsgIAogICAgICAgICAgdmFyIHJlc3VsdHMgPSBbWydDb3VudHJ5JywgJ1NlcXVlbmNlcyddXTsKICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChyZXNwb25zZS5kYXRhKTsKICAgICAgICAgIHRoaXMuY2hhcnREYXRhID0gcmVzdWx0czsKICAgICAgfSkKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Results.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Results.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<section style=\"padding: 4rem 2rem\">\n<h5><a href=\"/\">\n  <i class=\"fa fa-home\"></i> Home</a>&nbsp;<i class=\"fas fa-chevron-right\"></i>&nbsp;\n  <a href=\"#/search\"><i class=\"fa fa-database\"></i> hCoronavirusesDB</a>&nbsp;<i class=\"fas fa-chevron-right\"></i>\n  Found {{viruses ? viruses.length : \"...\"}} results <span v-if=\"search_type=='accession'\">for the accession number {{accession_num}}</span></h5>\n  <div v-if=\"search_type=='custom'\">\n        Search criteria: \n        <span class=\"badge badge-primary\">{{specimen.split(\"_\")[0]}}</span>&nbsp;\n        <span class=\"badge badge-success\">{{sequence_type == \"prot\" ? \"Proteins\" : \"Genes\"}}</span>\n        <span class=\"badge badge-light\">Gene Symbols:</span>&nbsp;<span class=\"crit\">{{gene_symbols ? gene_symbols.join(\", \") : \"(Any)\"}}</span>&nbsp;\n        <span class=\"badge badge-light\">Proteins:</span>&nbsp;<span class=\"crit\">{{proteins ? proteins.join(\", \") : \"(Any)\"}}</span>&nbsp;\n        <span class=\"badge badge-light\">Hosts:</span>&nbsp;<span class=\"crit\">{{hosts ? hosts.join(\", \") : \"(Any)\"}}</span>&nbsp;\n        <span class=\"badge badge-light\">Countries:</span>&nbsp;<span class=\"crit\">{{countries ? countries.join(\", \") : \"(Any)\"}}</span>&nbsp;\n        <span class=\"badge badge-light\">Collection Dates:</span>&nbsp;<span class=\"crit\">{{years ? years.join(\", \") : \"(Any)\"}}</span>\n        </div>\n<br>\n\n<div v-if=\"isLoadingResult\" style=\"text-align: center\">\n    <br />\n    <hollow-dots-spinner\n        :animation-duration=\"1000\"\n        :dot-size=\"20\"\n        :dots-num=\"3\"\n        color=\"#00d961\"\n        style=\"margin-left: auto; margin-right: auto;\"\n    />\n    <br />\n    <span class=\"badge badge-success\">Loading Results...</span>\n</div>\n<div v-if=\"!isLoadingResult\">\n<ul class=\"nav nav-tabs\" id=\"mainTab\" role=\"tablist\">\n  <li class=\"nav-item\">\n    <a class=\"nav-link active\" id=\"home-tab\" data-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\">Results (Table)</a>\n  </li>\n  \n  <li class=\"nav-item\">\n    <a class=\"nav-link\" id=\"hist-tab\" data-toggle=\"tab\" href=\"#hist\" role=\"tab\" aria-controls=\"hist\" aria-selected=\"false\">Collection Date Distribution</a>\n  </li>\n</ul>\n<div class=\"tab-content\" id=\"mainTabContent\">\n  <div class=\"tab-pane fade show active\" id=\"home\" role=\"tabpanel\" aria-labelledby=\"home-tab\">\n    <br>\n    <section>\n    <table id=\"myTable\" class=\"display nowrap table\" style=\"width:100%\">\n        <thead>\n        <tr>\n            <th><input type=\"checkbox\" id=\"selectAllGenes\" /></th>\n            <th>id</th>\n            <th>Gene Product<br> Name</th>\n            <th>Gene<br> Symbol</th>\n            <th>GenBank Genome<br> Accession</th>\n            <th>GenBank Protein<br> Aaccession</th>\n            <th>Strain Name</th>\n            <th>Collection<br> Date</th>\n            <th>Host</th>\n            <th>Country</th>\n            <th>Sequence</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"virus in viruses\" v-bind:key=\"virus.id\">\n            <td></td>\n            <td>{{ virus.id }}</td>\n            <td>{{ virus.gene_product_name }}</td>\n            <td>{{ virus.gene_symbol }}</td>\n            <td>{{ virus.genbank_genome_accession }}</td>\n            <td>{{ virus.genbank_protein_accession }}</td>\n            <td>{{ virus.strain_name }}</td>\n            <td>{{ virus.collection_date }}</td>\n            <td>{{ virus.host }}</td>\n            <td>{{ virus.country }}</td>\n            <td>{{ virus.fasta }}</td>\n        </tr>\n        </tbody>\n    </table>\n    <br>\n    <br>\n\n    <button @click=\"configureMview()\" type=\"button\" class=\"btn btn-primary\">\n      <i class=\"fas fa-align-center\"></i> Multiple Sequence Alignment (ClustalOmega)\n    </button>\n    &nbsp;\n    <button  @click=\"downloadSelected()\" id=\"download\" type=\"button\" class=\"btn btn-primary\">\n      <i class=\"fa fa-download\"></i> Download Selected Genes</button>\n   </section>\n   &nbsp;\n\n   \n\n  <!-- Modal -->\n  <div class=\"modal fade\" id=\"modalConfig\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Configure ClustalOmega Sequence Alignment</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <input id=\"chkConsensus\" type=\"checkbox\" v-model=\"mview_consensus\" />&nbsp;<label for=\"chkConsensus\">Show Consensus</label>\n          <div>Select the reference sequence:</div>\n          <div v-for=\"r in selectedRows\" v-bind:key=\"r.id\">\n            <input type=\"radio\" v-bind:value=\"r.id\" name=\"referenceForMview\"> {{r.title}}\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" @click=\"msaMuscleLink('mview')\" class=\"btn btn-primary\" data-dismiss=\"modal\">Run Alignment</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  </div>\n  <div class=\"tab-pane fade\" id=\"map\" role=\"tabpanel\" aria-labelledby=\"map-tab\" style=\"width:100%\">\n    <br>\n    <div v-if=\"chartTableData\" class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-lg-9\">\n        <GChart ref=\"gchartMap\" v-if=\"chartData\" :resizeDebounce=\"500\" type=\"GeoChart\" :data=\"chartData\" :options=\"chartOptions\" :settings=\"{packages: ['corechart', 'table'], mapsApiKey:'AIzaSyCqaPSmctfwgNKG5GE2DN3JMMGYDFItgQQ'}\"/>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-lg-3\">\n            <table class=\"table table-sm\" id=\"seqTable\">\n                <thead>\n                    <tr>\n                    <th>Country</th>\n                    <th>Sequence Count</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"(val, key) in chartTableData\" v-bind:key=\"key\" :class=\"{'table-secondary':(key == 'Unknown')}\">\n                        <td>{{key}} ({{country_codes[key]}})</td>\n                        <td>{{val}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n  </div>\n  <div class=\"tab-pane fade\" id=\"hist\" role=\"tabpanel\" aria-labelledby=\"hist-tab\" style=\"width:100%\">\n    <br>\n    <div v-if=\"yearData\" class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-lg-9\">\n        <GChart ref=\"gchartHist\" v-if=\"yearData\" type=\"ColumnChart\" :data=\"yearData\" :options=\"chartOptions\" :settings=\"{packages: ['corechart']}\"/>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-lg-3\">\n            <table class=\"table table-sm\" id=\"yearTable\">\n                <thead>\n                    <tr>\n                    <th>Year</th>\n                    <th>Sequence Count</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"data in yearData.slice(1)\" v-bind:key=\"data[0]\" :class=\"{'table-secondary':(data[0] == 'N/A')}\">\n                        <td>{{data[0]}}</td>\n                        <td>{{data[1]}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n  </div>\n</div>\n\n</div>\n\n</section>\n\n</template>\n\n<script>\nimport axios from 'axios'\nimport { GChart } from 'vue-google-charts'\nimport { HollowDotsSpinner } from 'epic-spinners'\nimport { saveAs } from 'file-saver';\n\nexport default {\n  name: \"results\",\n  components: {\n    GChart,\n    HollowDotsSpinner\n  },\n  props: ['search_type', 'sequence_type', 'accession_num', 'specimen', 'gene_symbols', 'proteins', 'hosts', 'countries', 'years'],\n  data () {\n    return {\n        mview_consensus: false,\n        mview_reference: -1,\n        selectedRows: [],\n        viruses: null,\n        genesTable: null,\n        chartData: [['Country', 'Popularity']],\n        chartTableData: false,\n        chartOptions: {\n          height: 600,\n          datalessRegionColor: \"#fcfcfc\",\n          colorAxis: {colors: ['lightblue', 'green']}\n        },\n        yearData: false,\n        isLoadingResult: true,\n        country_codes: {null: 'Unknown', 'Unknown': 'Unknown', 'Afghanistan': 'AF', 'Albania': 'AL', 'Algeria': 'DZ', 'Angola': 'AO', 'Argentina': 'AR', 'Australia': 'AU', \n          'Austria': 'AT', 'Azerbaijan': 'AZ', 'Bahrain': 'BH', 'Bangladesh': 'BD', 'Belarus': 'BY', 'Belgium': 'BE', 'Belize': 'BZ', \n          'Benin': 'BJ', 'Bolivia': 'BO', 'Bosnia_and_Herzegovina': 'BA', 'Botswana': 'BW', 'Brazil': 'BR', 'Brunei': 'BN', 'Bulgaria': 'BG',\n          'Burkina_Faso': 'BF', 'Cambodia': 'CO', 'Cameroon': 'CM', 'Canada': 'CA', 'Central_African_Republic': 'CF', 'Chile': 'CL',\n          'China': 'CN', 'Colombia': 'CO', 'Cote_dIvoire': 'CI', 'Croatia': 'HR', 'Cyprus': 'CY', 'Czech_Republic': 'CZ',\n          'Democratic_Republic_of_the_Congo': 'CD', 'Denmark': 'DK', 'Dominican_Republic': 'DO', 'Ecuador': 'EC', 'Egypt': 'EG', 'Equatorial_Guinea': 'GQ',\n          'Estonia': 'EE', 'Ethiopia': 'ET', 'Finland': 'FI', 'France': 'FR', 'Gabon': 'GA', 'Gambia': 'GM', 'Germany': 'DE', 'Ghana': 'GH',\n          'Gibraltar': 'GI', 'Greece': 'GR', 'Guam': 'GU', 'Guyana': 'GY', 'Honduras': 'HN', 'Hong_Kong': 'HK', 'Hungary': 'HU', 'India': 'IN',\n          'Indonesia': 'ID', 'Iran': 'IR', 'Iraq': 'IQ', 'Ireland': 'IE', 'Israel': 'IL', 'Italy': 'IT', 'Japan': 'JP', 'Kazakhstan': 'KZ', 'Kenya': 'KE',\n          'Korea': 'KP', 'Kyrgyzstan': 'KZ', 'Laos': 'LA', 'Latvia': 'LV', 'Lebanon': 'LB', 'Lesotho': 'LS', 'Liberia': 'LR', 'Libya': 'LY', 'Lithuania': 'LT',\n          'Luxembourg': 'LU', 'Macedonia': 'MK', 'Malawi': 'MW', 'Malaysia': 'MY', 'Mali': 'ML', 'Mauritania': 'MR', 'Mayotte': 'YT', 'Mexico': 'MX',\n          'Moldova': 'MD', 'Mongolia': 'MN', 'Morocco': 'MA', 'Mozambique': 'MZ', 'Myanmar': 'MM', 'Namibia': 'NA', 'Nepal': 'NP', 'Netherlands': 'NL',\n          'New_Zealand': 'NZ', 'Niger': 'NE', 'Nigeria': 'NG', 'Norway': 'NO', 'Oman': 'OM', 'Pakistan': 'PK', 'Palau': 'PW', 'Panama': 'PA',\n          'Papua_New_Guinea': 'PG', 'Peru': 'PE', 'Philippines': 'PH', 'Poland': 'PL', 'Portugal': 'PT', 'Qatar': 'QA', 'Republic_of_the_Congo': 'CD',\n          'Romania': 'RO', 'Russia': 'RU', 'Rwanda': 'RW', 'Senegal': 'SN', 'Serbia': 'RS', 'Serbia_and_Montenegro': 'ME', 'Seychelles': 'SC',\n          'Sierra_Leone': 'SL', 'Singapore': 'SG', 'Slovenia': 'SI', 'Somalia': 'SO', 'South_Africa': 'ZA', 'South_Korea': 'KR', 'Spain': 'ES',\n          'Sri_Lanka': 'LK', 'Sudan': 'SD', 'Swaziland (Eswatani)': 'SZ', 'Sweden': 'SE', 'Switzerland': 'CH', 'Syria': 'SY', 'Taiwan': 'TW', 'Thailand': 'TH',\n          'Togo': 'TG', 'Tunisia': 'TN', 'Turkey': 'TR', 'Uganda': 'UG', 'Ukraine': 'UA', 'United_Arab_Emirates': 'AE', 'United_Kingdom': 'GB', 'Uruguay': 'UY',\n          'USA': 'US', 'Uzbekistan': 'UZ', 'Viet_Nam': 'VN', 'West_Bank': 'PS', 'Zambia': 'ZM', 'Zimbabwe': 'ZW'},\n    }\n  },\n  created () {\n    this.fetchData();\n  },\n  updated: function () {\n    $.fn.dataTable.ext.errMode = 'none';\n\n    var genesTable = $('#myTable').DataTable({\n      columnDefs: [ {\n        orderable: false,\n        className: 'select-checkbox',\n        targets: 0\n      },\n      {\n        targets: [ 1, 10 ],\n        visible: false,\n        searchable: false\n      }\n      ],\n      select: {\n          style:    'multi',\n          selector: 'td:first-child'\n      },\n      order: [[ 2, \"asc\" ]],\n      responsive: true\n    });\n\n    this.genesTable = genesTable;\n\n    $('#seqTable').DataTable({\n      order: [[ 1, \"desc\" ]],\n      \"dom\": '<\"toolbar\">',\n      \"paging\": false,\n    });\n\n    $('#yearTable').DataTable({\n      order: [[ 1, \"desc\" ]],\n      \"dom\": '<\"toolbar\">',\n      \"paging\": false,\n    });\n\n\n    $(\"#selectAllGenes\").click( function(e) {\n        if ($(this).is( \":checked\" )) {\n            genesTable.rows().select();\n        } else {\n            genesTable.rows().deselect(); \n        }\n    });\n\n\n    $('#hist-tab').on('click', e=> {\n      setTimeout(()=>{\n        this.$refs.gchartHist.drawChart();\n      }, 500);\n    })\n\n    $('#map-tab').on('click', e=> {\n      setTimeout(()=>{\n        this.$refs.gchartMap.drawChart();\n      }, 500);\n    })\n  },\n  watch: {\n\n  },\n  methods: {\n    fetchData(){\n        switch(this.search_type)\n        {\n        case \"accession\":\n            this.getVirusesByAccession(this.accession_num)\n            break;\n        case \"custom\":\n            this.getVirusesCustom()\n            break;\n        }\n    },\n    msaMuscleLink(algo) {\n      var ids = [];\n      var selected = this.genesTable.rows('.selected').data();\n\n      if(selected.length < 2) {\n        alert(\"Please select at least 2 sequence from the table.\")\n        return false;\n      } else if (selected.length > 10) {\n        alert(\"You can select a maximum of 10 sequences for the alignment.\")\n        return false;\n      }\n\n      for (var i = 0; i < selected.length; i++) {\n        ids.push(parseInt(selected[i][1]));\n      }\n\n      if(algo == \"mview\") {\n        var refid = parseInt($(\"input:radio[name=referenceForMview]:checked\").val());\n        if(refid) {\n          var index = ids.indexOf(refid);\n          if (index !== -1) ids.splice(index, 1);\n          ids.unshift(refid);\n        }\n      }\n\n      var link;\n      if(algo == \"mview\" && this.mview_consensus) {\n        link = this.$router.resolve({ path: 'msa', query: {algo: algo, ids: ids, consensus: this.mview_consensus } });\n      } else {\n        link = this.$router.resolve({ path: 'msa', query: {algo: algo, ids: ids } });\n      }\n      window.open(link.href, '_blank');\n    },\n    configureMview(){\n      var rows = [];\n      var ids = [];\n      var selected = this.genesTable.rows('.selected').data();\n\n      if(selected.length < 2) {\n        alert(\"Please select at least 2 sequence from the table.\")\n        return false;\n      } else if (selected.length > 10) {\n        alert(\"You can select a maximum of 10 sequences for the alignment.\")\n        return false;\n      }\n\n      for (var i = 0; i < selected.length; i++) {\n        rows.push({id: parseInt(selected[i][1]), \n          title: selected[i][4]});\n      }\n\n      this.selectedRows = rows;\n\n      $('#modalConfig').modal('toggle')\n    },\n    downloadSelected() {\n      var fasta = [];\n      var selected = this.genesTable.rows('.selected').data();\n\n      if(selected.length == 0) {\n        alert(\"Please select at least 1 sequence from the table.\")\n        return;\n      }\n\n      for (var i = 0; i < selected.length; i++) {\n        fasta.push(selected[i][10].replace(\"&gt;\", \">\"));\n      }\n\n      var blob = new Blob([fasta.join(\"\\n\")], {type: \"text/plain;charset=utf-8\"});\n      saveAs(blob, \"hCovdb_records.fasta\");\n    },\n    getVirusesByAccession(accessionNum) {\n        axios.get(\"/api/viruses/search/by_accession/\" + accessionNum).then(response=>{\n            this.viruses = response.data;\n            this.isLoadingResult = false;\n            this.buildGeoMap();\n        })\n    },\n    getVirusesCustom() {\n      axios.post(\"/api/viruses/search/by_criteria/\" + this.sequence_type + \"/\" + this.specimen, {\n        gene_symbol: this.gene_symbols,\n        protein: this.proteins,\n        host: this.hosts,\n        country: this.countries,\n        collection_date: this.years,\n      }).then(response=>{  \n        this.viruses = response.data;\n        this.isLoadingResult = false;\n        this.buildGeoMap();\n      })\n    },\n    buildGeoMap() {\n        var results = [['Country', 'Sequences']];\n        var yearHist = [['Collection Date', 'Sequences']];\n        var counts = {};\n        var yearCounts = {};\n        var tableCounts = {};\n\n        for(var v of this.viruses) {\n          var country_code = this.country_codes[v.country];\n          var country_name = v.country == null ? \"Unknown\" : v.country;\n          var year = v.collection_date;\n          year = year == null ? \"Unknown\" : year;\n\n          if(country_code in counts) {\n            counts[country_code]++;\n            tableCounts[country_name]++;\n          }\n          else\n          {\n            counts[country_code] = 1;\n            tableCounts[country_name] = 1;\n          }\n\n          // Year data\n          if(year in yearCounts) {\n            yearCounts[year]++;\n          } else {\n            yearCounts[year] = 1;\n          }\n        }\n\n        for(var k in counts) {\n          results.push([k, counts[k]])\n        }\n        \n        for(var k in yearCounts) {\n          yearHist.push([k, yearCounts[k]])\n        }\n\n        this.chartData = results;\n        this.chartTableData = tableCounts;\n        this.yearData = yearHist;\n    },\n    getMapCounts(gene_symbols = null, proteins = null, hosts = null, countries = null, years = null) {\n      axios.post(\"/api/map/by_criteria/\" + this.specimen, {\n        gene_symbol: this.gene_symbols,\n        protein: this.proteins,\n        host: this.hosts,\n        country: this.countries,\n        collection_date: this.years,\n      }).then(response=>{  \n          var results = [['Country', 'Sequences']];\n          results = results.concat(response.data);\n          this.chartData = results;\n      })\n    }\n  }\n};\n</script>\n\n<style>\n.crit {\n    font-size: 75%;\n}\n</style>\n\n"]}]}